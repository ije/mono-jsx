// generated by build.ts, do not edit

// runtime flags
export const EVENT = 1;
export const CX = 2;
export const STYLE = 4;
export const RENDER_ATTR = 8;
export const RENDER_TOGGLE = 16;
export const RENDER_SWITCH = 32;
export const SIGNALS = 64;
export const SUSPENSE = 128;
export const COMPONENT = 256;
export const ROUTER = 512;
export const FORM = 1024;

/** event.js (246B) */
export const EVENT_JS = `{var w=window,m=new Map;w.$F=m.set.bind(m);w.$fmap=m;w.$emit=(e,i,s)=>m.get(i).call(w.$signals?.(s)??e.target,e.type==="mount"?e.target:e);w.$onsubmit=(e,i,s)=>{e.preventDefault();m.get(i).call(w.$signals?.(s)??e.target,new FormData(e.target),e)};}`;

/** cx.js (181B) */
export const CX_JS = `{var n=t=>typeof t=="string"?t:typeof t=="object"&&t!==null?(Array.isArray(t)?t.map(n).filter(Boolean):Object.entries(t).filter(([,e])=>!!e).map(([e])=>e)).join(" "):"";window.$cx=n;}`;

/** style.js (1,534B) */
export const STYLE_JS = `{var f=/^(-|f[lo].*[^se]$|g.{5,}[^ps]$|z|o[pr]|(W.{5})?[lL]i.*(t|mp)$|an|(bo|s).{4}Im|sca|m.{6}[ds]|ta|c.*[st]$|wido|ini)/;var p=new Set;var u=t=>!!t&&(t.constructor===Object||t.constructor===void 0),d=t=>t.replace(/[a-z][A-Z]/g,n=>n.charAt(0)+"-"+n.charAt(1).toLowerCase());var g=t=>{let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e)|0;return n>>>0};var h=(t,n)=>{let{inline:e,css:o}=b(n);if(o){let r="data-css-",s=g((e??"")+o.join("")),i=r+s.toString(36),l="["+i+"]";p.has(s)||(p.add(s),document.head.appendChild(document.createElement("style")).textContent=(e?l+"{"+e+"}":"")+o.map(a=>a===null?l:a).join("")),t.getAttributeNames().forEach(a=>a.startsWith(r)&&t.removeAttribute(a)),t.setAttribute(i,"")}else e&&t.setAttribute("style",e)},b=t=>{let n,e=[],o=new y;for(let[r,s]of Object.entries(t))switch(r.charCodeAt(0)){case 58:u(s)&&e.push(r.startsWith("::view-")?"":null,r+c(s));break;case 64:u(s)&&(r.startsWith("@keyframes ")?e.push(r+"{"+Object.entries(s).map(([i,l])=>u(l)?i+c(l):"").join("")+"}"):r.startsWith("@view-")?e.push(r+c(s)):e.push(r+"{",null,c(s)+"}"));break;case 38:u(s)&&e.push(null,r.slice(1)+c(s));break;default:n??={},n[r]=s}return n&&(o.inline=c(n).slice(1,-1)),e.length>0&&(o.css=e),o},c=t=>{let n="";for(let[e,o]of Object.entries(t)){let r=typeof o;if(r==="string"||r==="number"){let s=d(e),i=r==="number"?f.test(e)?""+o:o+"px":""+o;n+=(n?";":"")+s+":"+(s==="content"?JSON.stringify(i):i)}}return"{"+n+"}"},y=(()=>{function t(){}return t.prototype=Object.create(null),t})();window.$applyStyle=h;}`;

/** render_attr.js (414B) */
export const RENDER_ATTR_JS = `{var s=(l,n,r)=>{let e=l.parentElement;return e.tagName==="M-GROUP"&&(e=e.previousElementSibling),()=>{let t=r();n==="value"?e.value=String(t):n==="checked"?e.checked=!!t:typeof t=="boolean"?e.toggleAttribute(n,t):t==null?e.removeAttribute(n):typeof t=="object"?n==="class"?e.setAttribute(n,$cx(t)):n==="style"?$applyStyle(e,t):e.setAttribute(n,JSON.stringify(t)):e.setAttribute(n,String(t))}};window.$renderAttr=s;}`;

/** render_toggle.js (313B) */
export const RENDER_TOGGLE_JS = `{var i=(e,s)=>{let t,l=()=>e.replaceChildren(...s()?t:[]);return()=>{if(!t){let n=e.firstElementChild;n&&n.tagName==="TEMPLATE"&&n.hasAttribute("m-slot")?t=[...n.content.childNodes]:t=[...e.childNodes]}e.hasAttribute("vt")&&document.startViewTransition?document.startViewTransition(l):l()}};window.$renderToggle=i;}`;

/** render_switch.js (539B) */
export const RENDER_SWITCH_JS = `{var a=(l,u)=>{let s,r=l.getAttribute("value"),t,i,o=e=>t.get(e)??t.set(e,[]).get(e),d=()=>l.replaceChildren(...t.has(s)?t.get(s):i);return()=>{if(!t){t=new Map,i=[];for(let e of l.childNodes)if(e.nodeType===1&&e.tagName==="TEMPLATE"&&e.hasAttribute("m-slot")){for(let n of e.content.childNodes)n.nodeType===1&&n.hasAttribute("slot")?o(n.getAttribute("slot")).push(n):i.push(n);e.remove()}else r?o(r).push(e):i.push(e)}s=""+u(),l.hasAttribute("vt")&&document.startViewTransition?document.startViewTransition(d):d()}};window.$renderSwitch=a;}`;

/** signals.js (2,493B) */
export const SIGNALS_JS = `{let h;const w=window,p=document,y=new Map,k=new Map,$=new Map,u=n=>y.get(n)??y.set(n,N(n)).get(n),v=()=>Object.create(null),l=(n,e)=>n.getAttribute(e),N=n=>{const e=v(),t=(r,c)=>{e[r]=c},s=new Map,a=(r,c)=>{let i=s.get(r);return i||(i=new Set,s.set(r,i)),i.add(c),()=>{i.delete(c),i.size===0&&s.delete(r)}},o=new Proxy(v(),{get:(r,c)=>p.querySelector("[data-ref='"+n+":"+c+"']")});return new Proxy(e,{get:(r,c,i)=>{switch(c){case"$init":return t;case"$watch":return a;case"app":return u(0);case"refs":return o;default:return h?.(n,c),Reflect.get(r,c,i)}},set:(r,c,i,f)=>{if(i!==Reflect.get(r,c,f)){const d=s.get(c);return d&&queueMicrotask(()=>d.forEach(g=>g())),Reflect.set(r,c,i,f)}return!1}})},E=(n,e,t)=>{switch(e){case"toggle":return $renderToggle(n,t);case"switch":return $renderSwitch(n,t);case"html":return()=>n.innerHTML=""+t()}if(e&&e.length>2&&e.startsWith("[")&&e.endsWith("]"))return $renderAttr(n,e.slice(1,-1),t);const s=n.parentElement,a=()=>n.textContent=""+t();if(p.startViewTransition&&s.hasAttribute("data-vt")){const o=s.getAttribute("data-vt");return o&&(s.style.viewTransitionName=o),()=>p.startViewTransition(a)}return a},S=n=>{const e=n.indexOf(":");return e>0?[Number(n.slice(0,e)),n.slice(e+1)]:null},b=async(n,e=100)=>{const t=n();if(t!==void 0)return t;if(await new Promise(s=>setTimeout(s,25)),e<=0)throw new Error("Deferred value not found");return b(n,e-1)},T=n=>typeof n=="function"&&n(),M=(n,e)=>customElements.define(n,class extends HTMLElement{disposes=[];connectedCallback(){e(this)}disconnectedCallback(){this.disposes.forEach(t=>t()),this.disposes.length=0}});M("m-signal",n=>{const e=Number(l(n,"scope")),t=u(e),s=l(n,"key");if(s)n.disposes.push(t.$watch(s,E(n,l(n,"mode"),()=>t[s])));else{const a=Number(l(n,"computed"));b(()=>k.get(e+":"+a)).then(o=>{const r=E(n,l(n,"mode"),$fmap.get(a).bind(t));o.forEach(c=>{const[i,f]=S(c);n.disposes.push(u(i).$watch(f,r))})})}}),M("m-effect",n=>{const{disposes:e}=n,t=Number(l(n,"scope"));b(()=>$.get(t)??void 0).then(s=>{const a=s.length,o=new Array(a);e.push(()=>{o.forEach(T),o.length=0});for(let r=0;r<a;r++){const c=[],i=u(t),f=$fmap.get(s[r]),d=()=>{T(o[r]),o[r]=f?.call(i)};h=(g,m)=>c.push([g,m]),d(),h=void 0;for(const[g,m]of c)e.push(u(g).$watch(m,d))}})}),w.$S=(n,e)=>{const[t,s]=S(n);u(t).$init(s,e)},w.$C=(n,e,t)=>{k.set(n+":"+e,t)},w.$E=(n,...e)=>{$.set(n,e)},w.$patch=(n,...e)=>{for(const[t,...s]of e){let a=s.pop(),o=n;for(const r of s)o=o[r];o[a]=t}return n},w.$signals=n=>n!==void 0?u(n):void 0;}`;

/** suspense.js (394B) */
export const SUSPENSE_JS = `{const i=new Map,o=e=>e.getAttribute("chunk-id"),l=(e,t)=>customElements.define(e,class extends HTMLElement{connectedCallback(){t(this)}});l("m-portal",e=>{i.set(o(e),e)}),l("m-chunk",e=>{setTimeout(()=>{const t=o(e),n=i.get(t),s=e.firstChild?.content.childNodes;n&&(e.hasAttribute("next")?s&&n.before(...s):(e.hasAttribute("done")?n.remove():s&&n.replaceWith(...s),i.delete(t)),e.remove())})});}`;

/** component.js (1,689B) */
export const COMPONENT_JS = `{const e=document,a=(t,s)=>t.getAttribute(s);customElements.define("m-component",class extends HTMLElement{static observedAttributes=["name","props"];#t;#s;#r;#h;#i;#e=new Map;#a=!0;async#l(){if(!this.#t){this.#n("");return}const t=this.#s||"{}",s=this.#t+t,i={"x-component":this.#t,"x-props":t,"x-flags":$FLAGS},n=new AbortController;if(this.#h?.abort(),this.#h=n,this.#e.has(s)){this.#n(this.#e.get(s));return}this.#r?.length&&this.#n(this.#r);const r=await fetch(location.href,{headers:i,signal:n.signal});if(!r.ok)throw this.#n(""),new Error("Failed to fetch component '"+this.#t+"'");const[h,o]=await r.json();this.#e.set(s,h),this.#n(h),o&&(e.body.appendChild(e.createElement("script")).textContent=o)}#n(t){const s=()=>typeof t=="string"?this.innerHTML=t:this.replaceChildren(...t);this.hasAttribute("vt")&&e.startViewTransition&&!this.#a?e.startViewTransition(s):s(),this.#a=!1}get name(){return this.#t??null}set name(t){t&&t!==this.#t&&(this.#t=t,this.#o())}get props(){return this.#s?JSON.parse(this.#s):void 0}set props(t){const s=typeof t=="string"?t:JSON.stringify(t);s&&s!==this.#s&&(this.#s=s,this.#o())}attributeChangedCallback(t,s,i){this.#t&&i&&(t==="name"?this.name=i:t==="props"&&(this.props=i))}connectedCallback(){setTimeout(()=>{if(!this.#r){const t=a(this,"props");this.#t=a(this,"name"),this.#s=t?.startsWith("base64,")?atob(t.slice(7)):void 0,this.#r=[...this.childNodes]}this.#l()})}disconnectedCallback(){this.#e.clear(),this.#h?.abort(),this.#h=void 0,this.#i&&clearTimeout(this.#i),this.#i=void 0}#o(){this.#i&&clearTimeout(this.#i),this.#i=setTimeout(()=>{this.#i=void 0,this.#l()},50)}refresh(){this.#t&&this.#e.delete(this.#t+(this.#s||"{}")),this.#o()}});}`;

/** router.js (2,270B) */
export const ROUTER_JS = `{const n=document,a=location,o=t=>t.split("#",1)[0],l=t=>o(t)===o(a.href);customElements.define("m-router",class extends HTMLElement{#t;#s;#i;#n;#e=new Map;#r=!0;async#c(t){const s=new AbortController,i={"x-route":"true","x-flags":$FLAGS};this.#n?.abort(),this.#n=s;const e=await fetch(t,{headers:i,signal:s.signal});if(e.status===404)return null;if(!e.ok)throw this.replaceChildren(),new Error("Failed to fetch route: "+e.status+" "+e.statusText);return e.json()}#a(t){const s=()=>typeof t=="string"?this.innerHTML=t:this.replaceChildren(...t);this.hasAttribute("vt")&&n.startViewTransition&&!this.#r?n.startViewTransition(s):s(),this.#r=!1}#o(){n.querySelectorAll("nav a").forEach(t=>{const{href:s,classList:i}=t,e=t.closest("nav")?.getAttribute("data-active-class")??"active";l(s)?i.add(e):i.remove(e)})}async#l(t,s){const i=this.#c(t).then(e=>{if(e){const[r,c]=e;return this.#e.set(t,r),this.#a(r),c}else this.#e.delete(t),this.#a(this.#t??[]),typeof $signals<"u"&&($signals(0).url=new URL(t))});this.#e.has(t)?this.#a(this.#e.get(t)):await i,history[s?.replace?"replaceState":"pushState"]({},"",t),this.#o(),window.scrollTo(0,0),i.then(e=>{e&&(n.body.appendChild(n.createElement("script")).textContent=e)})}navigate(t,s){const i=new URL(t,a.href);if(i.origin!==a.origin){a.href=t;return}l(i.href)||this.#l(t,s)}connectedCallback(){setTimeout(()=>{if(!this.#t)if(this.hasAttribute("fallback"))this.removeAttribute("fallback"),this.#t=[...this.childNodes];else{this.#t=[];for(const t of this.childNodes)if(t.nodeType===1&&t.tagName==="TEMPLATE"&&t.hasAttribute("m-fallback")){this.#t.push(...t.content.childNodes),t.remove();break}}}),this.#s=t=>{if(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||!(t.target instanceof HTMLAnchorElement))return;const{download:s,href:i,rel:e,target:r}=t.target;s||e==="external"||r==="_blank"||!i.startsWith(a.origin)||(t.preventDefault(),this.navigate(i))},this.#i=()=>this.#l(a.href),addEventListener("popstate",this.#i),n.addEventListener("click",this.#s),setTimeout(()=>this.#o()),globalThis.$router=this}disconnectedCallback(){removeEventListener("popstate",this.#i),n.removeEventListener("click",this.#s),delete globalThis.$router,this.#n?.abort(),this.#n=void 0,this.#e.clear(),this.#s=void 0,this.#i=void 0}});}`;

/** form.js (1,441B) */
export const FORM_JS = `{customElements.define("m-invalid",class extends HTMLElement{connectedCallback(){const s=this.getAttribute("for"),t=this.closest("form"),r=this.textContent;if(s&&t&&r)for(const l of s.split(",")){const o=t.elements.namedItem(l.trim());if(o){const i=()=>{o.removeEventListener("input",i),o.setCustomValidity("")};o.addEventListener("input",i),o.setCustomValidity(r),o.focus()}}this.remove()}}),window.$onrfs=async s=>{s.preventDefault();const t=s.target;if(t.querySelectorAll("m-formslot").forEach(e=>{e.innerHTML=""}),!t.checkValidity())return;const r=new FormData(t),l=[...t.elements];for(const e of l)e._disabled=e.disabled,e.disabled=!0;const o=await fetch(location.href,{method:"POST",headers:{"x-route-form":"true","x-flags":$FLAGS},body:r}),[i,m]=await o.json(),f=document.createElement("template"),u=new Map;f.innerHTML=i;for(const e of l)e.disabled=e._disabled,delete e._disabled;for(const e of f.content.childNodes){if(e.nodeType===1){const n=e,a=n.getAttribute("formslot"),c=a?'m-formslot[name="'+a+'"]':"m-formslot",d=a?t.querySelector(c)??document.querySelector(c):t.querySelector(c);if(d){d.innerHTML="",u.set(n,d);continue}}t.appendChild(e)}for(const[e,n]of u)switch(n.getAttribute("mode")){case"insertbefore":n.before(e);break;case"insertafter":n.after(e);break;default:n.appendChild(e)}setTimeout(()=>{l.some(e=>!e.validity.valid)||t.reset()},0),m&&(document.body.appendChild(document.createElement("script")).textContent=m)};}`;
