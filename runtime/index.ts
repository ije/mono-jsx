// generated by build.ts, do not edit

// runtime flags
export const EVENT = 1;
export const CX = 2;
export const STYLE = 4;
export const RENDER_ATTR = 8;
export const RENDER_TOGGLE = 16;
export const RENDER_SWITCH = 32;
export const SIGNALS = 64;
export const SUSPENSE = 128;
export const LAZY = 256;
export const ROUTER = 512;

/** event.js (193 bytes) */
export const EVENT_JS = `{var w=window;w.$emit=(e,f,s)=>f.call(w.$signals?.(s)??e.target,e.type==="mount"?e.target:e);w.$onsubmit=(e,f,s)=>{e.preventDefault();f.call(w.$signals?.(s)??e.target,new FormData(e.target),e)};}`;

/** cx.js (189 bytes) */
export const CX_JS = `{var n=e=>typeof e=="string"?e:typeof e=="object"&&e!==null?Array.isArray(e)?e.map(n).filter(Boolean).join(" "):Object.entries(e).filter(([,t])=>!!t).map(([t])=>t).join(" "):"";window.$cx=n;}`;

/** style.js (1,247 bytes) */
export const STYLE_JS = `{var a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;var l=e=>typeof e=="string";var u=e=>e.replace(/[a-z][A-Z]/g,r=>r.charAt(0)+"-"+r.charAt(1).toLowerCase());var p=e=>{let r=[],t=[],n=new g;for(let[o,s]of Object.entries(e))switch(o.charCodeAt(0)){case 58:t.push(null,o+"{"+c(s)+"}");break;case 64:t.push(o+"{",null,"{"+c(s)+"}}");break;case 38:t.push(null,o.slice(1)+"{"+c(s)+"}");break;default:r.push([o,s])}return r.length>0&&(n.inline=c(r)),t.length>0&&(n.css=t),n},f=(e,r)=>{let{inline:t,css:n}=p(r);if(n){let o="data-css-",s="["+o+(Date.now()+Math.random()).toString(36).replace(".","")+"]";document.head.appendChild(document.createElement("style")).textContent=(t?s+"{"+t+"}":"")+n.map(i=>i===null?s:i).join(""),e.getAttributeNames().forEach(i=>i.startsWith(o)&&e.removeAttribute(i)),e.setAttribute(s.slice(1,-1),"")}else t&&e.setAttribute("style",t)},c=e=>{if(typeof e=="object"&&e!==null){let r="";for(let[t,n]of Array.isArray(e)?e:Object.entries(e))if(l(n)||typeof n=="number"){let o=u(t),s=typeof n=="number"?a.test(t)?""+n:n+"px":""+n;r+=(r?";":"")+o+":"+(o==="content"?JSON.stringify(s):s)}return r}return""},g=(()=>{function e(){}return e.prototype=Object.freeze(Object.create(null)),e})();window.$applyStyle=f;}`;

/** render_attr.js (414 bytes) */
export const RENDER_ATTR_JS = `{var l=(s,n,i)=>{let e=s.parentElement;return e.tagName==="M-GROUP"&&(e=e.previousElementSibling),()=>{let t=i();n==="value"?e.value=String(t):n==="checked"?e.checked=!!t:typeof t=="boolean"?e.toggleAttribute(n,t):t==null?e.removeAttribute(n):typeof t=="object"?n==="class"?e.setAttribute(n,$cx(t)):n==="style"?$applyStyle(e,t):e.setAttribute(n,JSON.stringify(t)):e.setAttribute(n,String(t))}};window.$renderAttr=l;}`;

/** render_toggle.js (365 bytes) */
export const RENDER_TOGGLE_JS = `{var r=(e,l)=>{let t;return()=>{if(!t){let n=e.firstElementChild;n&&n.tagName==="TEMPLATE"&&n.hasAttribute("m-slot")?t=[...n.content.childNodes]:t=[...e.childNodes]}let s=e.getAttribute("view-transition"),i=()=>e.replaceChildren(...l()?t:[]);s&&document.startViewTransition?(e.style.viewTransitionName=s,document.startViewTransition(i)):i()}};window.$renderToggle=r;}`;

/** render_switch.js (591 bytes) */
export const RENDER_SWITCH_JS = `{var c=(s,u)=>{let r,o=s.getAttribute("value"),t,l,a=n=>t.get(n)??t.set(n,[]).get(n);return()=>{if(!t){t=new Map,l=[];for(let e of s.childNodes)if(e.nodeType===1&&e.tagName==="TEMPLATE"&&e.hasAttribute("m-slot")){for(let i of e.content.childNodes)i.nodeType===1&&i.hasAttribute("slot")?a(i.getAttribute("slot")).push(i):l.push(i);e.remove()}else o?a(o).push(e):l.push(e)}r=""+u();let n=s.getAttribute("view-transition"),d=()=>s.replaceChildren(...t.has(r)?t.get(r):l);n&&document.startViewTransition?(s.style.viewTransitionName=n,document.startViewTransition(d)):d()}};window.$renderSwitch=c;}`;

/** signals.js (2,196 bytes) */
export const SIGNALS_JS = `{let m;const h=window,b=new Map,k=new Map,l=n=>k.get(n)??k.set(n,M(n)).get(n),y=()=>Object.create(null),f=(n,e)=>n.getAttribute(e),M=n=>{const e=y(),t=(r,c)=>{e[r]=c},s=new Map,a=(r,c)=>{let o=s.get(r);return o||(o=new Set,s.set(r,o)),o.add(c),()=>{o.delete(c),o.size===0&&s.delete(r)}},i=new Proxy(y(),{get:(r,c)=>document.querySelector("[data-ref='"+n+":"+c+"']")});return new Proxy(e,{get:(r,c,o)=>{switch(c){case"$init":return t;case"$watch":return a;case"app":return l(0);case"refs":return i;default:return m?.(n,c),Reflect.get(r,c,o)}},set:(r,c,o,d)=>{if(o!==Reflect.get(r,c,d)){const u=s.get(c);return u&&queueMicrotask(()=>u.forEach(g=>g())),Reflect.set(r,c,o,d)}return!1}})},$=(n,e,t)=>{switch(e){case"toggle":return $renderToggle(n,t);case"switch":return $renderSwitch(n,t);case"html":return()=>n.innerHTML=""+t()}return e&&e.length>2&&e.startsWith("[")&&e.endsWith("]")?$renderAttr(n,e.slice(1,-1),t):()=>n.textContent=""+t()},E=n=>{const e=n.indexOf(":");return e>0?[Number(n.slice(0,e)),n.slice(e+1)]:null},p=async n=>{const e=n();return e!==void 0?e:(await new Promise(t=>setTimeout(t,0)),p(n))},S=n=>{typeof n=="function"&&n()},v=(n,e)=>customElements.define(n,class extends HTMLElement{disposes=[];connectedCallback(){e(this)}disconnectedCallback(){this.disposes.forEach(t=>t()),this.disposes.length=0}});v("m-signal",n=>{const e=Number(f(n,"scope")),t=l(e),s=f(n,"key");if(s)n.disposes.push(t.$watch(s,$(n,f(n,"mode"),()=>t[s])));else{const a=Number(f(n,"computed"));p(()=>b.get(e*1e9+a)).then(([i,r])=>{const c=$(n,f(n,"mode"),i.bind(t));r.forEach(o=>{const[d,u]=E(o);n.disposes.push(l(d).$watch(u,c))})})}}),v("m-effect",n=>{const{disposes:e}=n,t=Number(f(n,"scope")),s=Number(f(n,"n")),a=new Array(s);e.push(()=>{a.forEach(S),a.length=0});for(let i=0;i<s;i++){const r="$ME_"+t+"_"+i;p(()=>h[r]).then(c=>{const o=[],d=l(t),u=()=>{S(a[i]),a[i]=c.call(d)};m=(g,w)=>o.push([g,w]),u(),m=void 0;for(const[g,w]of o)e.push(l(g).$watch(w,u))},()=>{})}}),h.$MS=(n,e)=>{const[t,s]=E(n);l(t).$init(s,e)},h.$MC=(n,e,t,s)=>{b.set(n*1e9+e,[t,s])},h.$patch=(n,...e)=>{for(const[t,...s]of e){const a=s.pop();let i=n;for(const r of s)i=i[r];i[a]=t}return n},h.$signals=n=>n!==void 0?l(n):void 0;}`;

/** suspense.js (394 bytes) */
export const SUSPENSE_JS = `{const i=new Map,o=e=>e.getAttribute("chunk-id"),l=(e,t)=>customElements.define(e,class extends HTMLElement{connectedCallback(){t(this)}});l("m-portal",e=>{i.set(o(e),e)}),l("m-chunk",e=>{setTimeout(()=>{const t=o(e),n=i.get(t),s=e.firstChild?.content.childNodes;n&&(e.hasAttribute("next")?s&&n.before(...s):(e.hasAttribute("done")?n.remove():s&&n.replaceWith(...s),i.delete(t)),e.remove())})});}`;

/** lazy.js (1,990 bytes) */
export const LAZY_JS = `{const a=document,h=(t,i)=>t.getAttribute(i),r=(t,i=[])=>t.replaceChildren(...i);customElements.define("m-component",class extends HTMLElement{static observedAttributes=["name","props"];#t;#s;#e;#n;#i;async#r(){if(!this.#t){const s=this.getAttribute("view-transition"),e=()=>r(this);s&&document.startViewTransition?(this.style.viewTransitionName=s,document.startViewTransition(e)):e();return}const t={"x-component":this.#t,"x-props":this.#s||"{}","x-flags":$FLAGS},i=new AbortController;this.#n?.abort(),this.#n=i;{const s=this.getAttribute("view-transition"),e=()=>r(this,this.#e);s&&document.startViewTransition?(this.style.viewTransitionName=s,document.startViewTransition(e)):e()}const n=await fetch(location.href,{headers:t,signal:i.signal});if(!n.ok){const s=this.getAttribute("view-transition"),e=()=>r(this);throw s&&document.startViewTransition?(this.style.viewTransitionName=s,document.startViewTransition(e)):e(),new Error("Failed to fetch component '"+this.#t+"'")}const[l,o]=await n.json();{const s=this.getAttribute("view-transition"),e=()=>{this.innerHTML=l};s&&document.startViewTransition?(this.style.viewTransitionName=s,document.startViewTransition(e)):e()}o&&(a.body.appendChild(a.createElement("script")).textContent=o)}get name(){return this.#t??null}set name(t){t&&t!==this.#t&&(this.#t=t,this.refresh())}get props(){return this.#s?JSON.parse(this.#s):void 0}set props(t){const i=typeof t=="string"?t:JSON.stringify(t);i&&i!==this.#s&&(this.#s=i,this.refresh())}connectedCallback(){setTimeout(()=>{if(!this.#e){const t=h(this,"props");this.#t=h(this,"name"),this.#s=t?.startsWith("base64,")?atob(t.slice(7)):void 0,this.#e=[...this.childNodes]}this.#r()})}disconnectedCallback(){r(this,this.#e),this.#n?.abort(),this.#n=void 0,this.#i&&clearTimeout(this.#i),this.#i=void 0}attributeChangedCallback(t,i,n){this.#t&&n&&(t==="name"?this.name=n:t==="props"&&(this.props=n))}refresh(){this.#i&&clearTimeout(this.#i),this.#i=setTimeout(()=>{this.#i=void 0,this.#r()},50)}});}`;

/** router.js (2,350 bytes) */
export const ROUTER_JS = `{const r=document,o=location,h=t=>t.split("#",1)[0],d=t=>h(t)===h(o.href);customElements.define("m-router",class extends HTMLElement{#t;#e;#s;#i;async#o(t){const s=new AbortController,e={"x-route":"true","x-flags":$FLAGS};this.#i?.abort(),this.#i=s;const i=await fetch(t,{headers:e,signal:s.signal});if(i.status===404){const n=this.getAttribute("view-transition"),a=()=>this.replaceChildren(...this.#t);return n&&document.startViewTransition?(this.style.viewTransitionName=n,document.startViewTransition(a)):a(),!0}if(!i.ok){const n=this.getAttribute("view-transition"),a=()=>this.replaceChildren();throw n&&document.startViewTransition?(this.style.viewTransitionName=n,document.startViewTransition(a)):a(),new Error("Failed to fetch route: "+i.status+" "+i.statusText)}const[l,c]=await i.json();{const n=this.getAttribute("view-transition"),a=()=>{this.innerHTML=l};n&&document.startViewTransition?(this.style.viewTransitionName=n,document.startViewTransition(a)):a()}c&&(r.body.appendChild(r.createElement("script")).textContent=c)}#n(){r.querySelectorAll("nav a").forEach(t=>{const{href:s,classList:e}=t,i=t.closest("nav")?.getAttribute("data-active-class")??"active";d(s)?e.add(i):e.remove(i)})}navigate(t,s){const e=new URL(t,o.href);if(e.origin!==o.origin){o.href=t;return}d(e.href)||this.#a(t,s)}async#a(t,s){const e=await this.#o(t);s?.replace?history.replaceState({},"",t):history.pushState({},"",t),e&&typeof $signals<"u"&&($signals(0).url=new URL(t)),this.#n(),window.scrollTo(0,0)}connectedCallback(){setTimeout(()=>{if(!this.#t)if(this.getAttribute("status")==="404")this.#t=[...this.childNodes];else{this.#t=[];for(const t of this.childNodes)if(t.nodeType===1&&t.tagName==="TEMPLATE"&&t.hasAttribute("m-slot")){this.#t.push(...t.content.childNodes),t.remove();break}}}),this.#e=t=>{if(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||!(t.target instanceof HTMLAnchorElement))return;const{download:s,href:e,rel:i,target:l}=t.target;s||i==="external"||l==="_blank"||!e.startsWith(o.origin)||(t.preventDefault(),this.navigate(e))},this.#s=()=>this.#a(o.href),addEventListener("popstate",this.#s),r.addEventListener("click",this.#e),setTimeout(()=>this.#n())}disconnectedCallback(){removeEventListener("popstate",this.#s),r.removeEventListener("click",this.#e),this.#i?.abort(),this.#i=void 0,this.#e=void 0,this.#s=void 0}});}`;
